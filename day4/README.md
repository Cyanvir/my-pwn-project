# 🛡️ Pwn 学习日志：变量与数据处理

**日期：** 2026-02-09
**学习平台：** pwn.college
**完成模块：**
- [x] Linux Luminarium: Variables 
- [x] Linux Luminarium: Data Manipulation 

---

## 1. 📦 Shell Variables (变量)

变量就像是 Shell 的“记忆”，用来临时存储字符串或数字。

### 1.1 基础操作
| 操作 | 语法 | 示例 | 注意事项 |
| :--- | :--- | :--- | :--- |
| **定义/赋值** | `VAR=value` | `MY_FLAG=pwn` | **等号两边绝对不能有空格！** |
| **读取** | `$VAR` | `echo $MY_FLAG` | 必须加 `$` 才能取出里面的值。 |
| **读取(进阶)** | `${VAR}` | `echo ${MY_FLAG}_2026` | 当变量名和后面的字符连在一起时，用 `{}` 明确边界。 |

### 1.2 引号的艺术 (Quotes)
* **双引号 `""`**：**会**解析变量。
    * `echo "Hello $USER"` -> 输出 `Hello hacker`
* **单引号 `''`**：**不会**解析变量（所见即所得）。
    * `echo 'Hello $USER'` -> 输出 `Hello $USER`

### 1.3 进程与环境变量 (Export)
这是 Pwn 中通过环境变量注入 Payload 的基础。

* **普通变量**：只在当前 Shell 有效。
* **`export`**：将变量提升为“环境变量”，**子进程**也可以继承和使用。
    * 
    * 场景：在 Shell 里定义了 `TOKEN=123`，然后运行 `./run`。如果不用 `export`，`run` 程序是看不到 `TOKEN` 的。
* **命令对比**：
    * **`env`**：列出当前所有的**环境变量**（内存中的）。
    * **`cat`**：读取**文件内容**（硬盘上的）。

### 1.4 交互与读取
* **`read`**：从标准输入读取一行内容赋值给变量。
    * `read MY_INPUT` -> 等待用户输入，回车后存入 `$MY_INPUT`。
    * `read -p "请输入: " MY_INPUT` -> 带提示符的读取。

### 1.5 高级替换 (Substitution) —— ⭐ 难点
* **命令替换 `$()`**：
    * **功能**：执行括号里的**命令**，把**输出结果**变成**文本**。
    * **示例**：`echo "Current dir is $(pwd)"`
* **进程替换 `>()` (复习)**：
    * **功能**：执行括号里的命令，把它变成一个**临时文件路径**。
    * **对比**：
        * `$()` 得到的是 **内容** (String)。
        * `>()` 得到的是 **路径** (File Path)。

---

## 2. ✂️ Data Manipulation (数据处理)

当 `cat flag` 输出一堆乱码时，这些工具能帮你“修剪”出想要的数据。

### 2.1 tr (Translate & Delete)
字符的一对一替换工具。

| 功能 | 语法示例 | 解释 |
| :--- | :--- | :--- |
| **单个替换** | `tr 'a' 'b'` | 把所有的 `a` 变成 `b`。 |
| **多个替换** | `tr 'a-z' 'A-Z'` | 把所有小写字母变成大写（ROT13 解密常用）。 |
| **删除字符** | `tr -d 'a'` | 删除所有的 `a` 字符。 |
| **删除空行** | `tr -d '\n'` | 把换行符删掉，让多行变成一行。 |

### 2.2 cut (剪切列) —— ⭐ 重点
按列提取数据，处理 CSV 或日志文件神器。

* **`-d` (Delimiter)**：指定分隔符（默认是 Tab，常用空格 ` ` 或逗号 `,`）。
* **`-f` (Field)**：指定要取第几列。

> **示例：** 假设 `users.txt` 内容是 `root:x:0:0`
> `cut -d ':' -f 1 users.txt` -> 输出 `root`

### 2.3 head & tail (掐头去尾)
* **`head -n 5 file`**：看文件的前 5 行。
* **`tail -n 5 file`**：看文件的后 5 行。
* **`tail -n +5 file`**：从第 5 行开始看到最后。

### 2.4 sort (排序)
默认按字母顺序排序，常配合 `uniq` 使用。

| 参数 | 含义 | 场景 |
| :--- | :--- | :--- |
| **(默认)** | 字典序排序 | `a` -> `b` -> `c` |
| **`-r`** | **Reverse** (倒序) | `z` -> `a` |
| **`-n`** | **Numeric** (按数值) | 解决 `10` 排在 `2` 前面的问题（按数值大小排）。 |
| **`-u`** | **Unique** (去重) | 排序后删除重复的行，只留一份。 |

---

## 3. 🧠 综合实战逻辑 (Pipeline)

Pwn 题中常见的数据流处理链：

```bash
# 场景：读取日志，找到包含 "flag" 的行，提取第 2 列，去重并排序
cat /var/log/app.log | grep "flag" | cut -d " " -f 2 | sort -u
```
* **❌ 常见误区 (踩过的坑)：**
    * **管道理解问题：** `|` 用于连接**两个命令**，把「前一个命令的输出」直接传给「后一个命令的输入」
	* **重定向理解问题：** `>` 连接**命令和文件**，把「命令的输出」写入「文件」（覆盖文件原有内容）